CREATE TABLE AUTEUR (
	PSEUDO VARCHAR(20) PRIMARY KEY, 
	MDP VARCHAR(20),
   	IDENTIFIANT VARCHAR(30),
   	ROLE VARCHAR(1),
);

CREATE TABLE BILLET (
	ID_BILLET INT(7) AUTO_INCREMENT PRIMARY KEY, 
	TITRE VARCHAR(30), 
	CONTENU TEXT,
	PSEUDO VARCHAR(20),
    	DATE_CREATION DATETIME,
    	CONSTRAINT fk_billet_auteur FOREIGN KEY (PSEUDO) REFERENCES AUTEUR(PSEUDO) 
);

CREATE TABLE MOT_CLE (
	MOT VARCHAR(10) PRIMARY KEY
);

CREATE TABLE COMMENTAIRE (
	ID_COM INT(7) AUTO_INCREMENT PRIMARY KEY,
    	ID_BILLET INT(7), 
	PSEUDO VARCHAR(20),
	COMMENTAIRE TEXT,
    	DATE_CREATION DATETIME,
    	CONSTRAINT fk_commentaire_billet FOREIGN KEY (ID_BILLET) REFERENCES BILLET(ID_BILLET),
	CONSTRAINT fk_commentaire_auteur FOREIGN KEY (PSEUDO) REFERENCES AUTEUR(PSEUDO)
);

CREATE TABLE REPONSE_COM (
	ID_REPCOM INT(7) AUTO_INCREMENT PRIMARY KEY,
    	ID_COM INT(7), 
	PSEUDO VARCHAR(20),
	COMMENTAIRE TEXT,
    	DATE_CREATION DATETIME,
   	CONSTRAINT fk_reponsecom_commentaire FOREIGN KEY (ID_COM) REFERENCES COMMENTAIRE(ID_COM), 
	CONSTRAINT fk_reponsecom_auteur FOREIGN KEY (PSEUDO) REFERENCES AUTEUR(PSEUDO)
);

CREATE TABLE COMMENTAIREMOT (
	ID_COMMOT INT(7) AUTO_INCREMENT PRIMARY KEY,
    	MOT VARCHAR(10), 
	PSEUDO VARCHAR(20),
	COMMENTAIRE TEXT,
    	DATE_CREATION DATETIME,
    	CONSTRAINT fk_commentairemot_mot FOREIGN KEY (MOT) REFERENCES MOT_CLE(MOT),
	CONSTRAINT fk_commentairemot_auteur FOREIGN KEY (PSEUDO) REFERENCES AUTEUR(PSEUDO)
);

CREATE TABLE REPONSE_MOT (
	ID_REPMOT INT(7) AUTO_INCREMENT PRIMARY KEY,
    	ID_COMMOT INT(7), 
	PSEUDO VARCHAR(20),
	COMMENTAIRE TEXT,
    	DATE_CREATION DATETIME,
   	CONSTRAINT fk_reponsemot_commentairemot FOREIGN KEY (ID_COMMOT) REFERENCES COMMENTAIREMOT(ID_COMMOT),
	CONSTRAINT fk_reponsemot_auteur FOREIGN KEY (PSEUDO) REFERENCES AUTEUR(PSEUDO)
);

CREATE TABLE CARACTERISE(
	MOT VARCHAR(10), 
	ID_BILLET INT(7), 
	CONSTRAINT pk_caracterise PRIMARY KEY (MOT, ID_BILLET),
    	CONSTRAINT fk_caracterise_mot FOREIGN KEY (MOT) REFERENCES MOT_CLE(MOT),
    	CONSTRAINT fk_caracterise_billet FOREIGN KEY (ID_BILLET) REFERENCES BILLET(ID_BILLET)
);

CREATE TABLE CARACTERISE2(
	MOT VARCHAR(10), 
	ID_COMMOT INT(7), 
	CONSTRAINT pk_caracterise PRIMARY KEY (MOT, ID_COMMOT),
    	CONSTRAINT fk_caracterise_mot2 FOREIGN KEY (MOT) REFERENCES MOT_CLE(MOT),
    	CONSTRAINT fk_caracterise_commentairemot FOREIGN KEY (ID_COMMOT) REFERENCES COMMENTAIREMOT(ID_COMMOT)
);
